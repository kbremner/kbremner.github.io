---
layout: post
title: Scraping Kickstarter - Part 1
sections: 
  - Getting Projects
  - Searching
  - More Information
  - Summary
tags: android java kickstarter scraping api
published: true
---

Having backed a few projects on Kickstarter, it was a bit disappointing when they released a new iPhone application, but nothing for Android users. Also, although they have an API, attempting to use it results in a messaging stating that it is only for use by their own products.

There are a couple of third party apps on Google Play, however I thought I'd take a shot at scraping Kickstarter and seeing how much information I could get, and what I could create. This post is the first in a series following my progress.

{% include section_header.html name="Getting Projects" %}
###Finding the Data
To get the information we need, we could grab the web pages and scrape the DOM. However, this requires downloading a lot of markup that we don't need, as well as presenting difficulties in how to deal with content generated by javascript. It is much easier and more efficient to try and obtain the data from a data endpoint. This isn't possible in all cases, but it's always worth trying to find one by poking around the site to be scraped.

So now to try poking around the Kickstarter site. A list of all projects on Kickstarter can be viewed by going to [https://www.kickstarter.com/discover/advanced](https://www.kickstarter.com/discover/advanced). Changing one of the filters at the top of the page results in it being updated dynamically, meaning that the page must be grabbing the data from somewhere. When investigating the network traffic, it can be seen that changing a filter causes a GET request to be sent to the same URL, but with some URL parameters added and the `Accept` header set to `application/json`. The addition of the header results in JSON data being returned instead of a web page. In fact, the `Accept` header isn't needed - the same effect can be achieved by using advanced.json in the URL, i.e. [https://www.kickstarter.com/discover/advanced.json](https://www.kickstarter.com/discover/advanced.json).

It's worth noting that the results are paginated. Scrolling to the bottom of the page and pressing "load more" will result in another request being sent to the advanced endpoint with a `page` URL parameter. The parameter value can be incremented until the returned JSON data contains no projects, meaning that all the results have been returned.

###Endpoint Parameters
So now we have an endpoint that we can get JSON data from, we need to get a feel for how we can use it. As we've seen above, changing the filters results in requests being set with various URL parameters. Changing the category to Art, for instance, results in the `category_id` URL parameter being added, set to 1. Also, changing the sort type results in the `sort` URL parameter being added. Going through all the possible choices for each gives the values that can be used. The plus button can also be used to add additional filters and the associated URL parameters can be identified.

The location parameter is a bit trickier than the other parameters. Pressing on the location filter opens a pop-over element. After choosing a location, we can see that a `woe_id` parameter is set to an ID representing location. But how did the page get that ID?

{% include section_header.html name="Searching" %}
When changing the location, if we enter text in the search box, we can see that this results in a request being sent to a new endpoint, with a URL parameter specifying the search term(s), i.e. [https://www.kickstarter.com/locations/search.json?searchable=true&term=london+UK](https://www.kickstarter.com/locations/search.json?searchable=true&term=london+UK). JSON data is returned, containing locations that match the search terms. The ID in one of the locations can then be used as the value for the `woe_id` URL parameter.

So we know we can search locations, but can we search for projects? At the top of the page is a search box for just such a task. Entering text results in a request being sent to yet another endpoint, in a similar format to the location search, i.e. [https://www.kickstarter.com/projects/search.json?term=space+monkey](https://www.kickstarter.com/projects/search.json?term=space+monkey). The returned JSON data contains details about projects that match the search terms, giving us a means of easily searching for projects.

{% include section_header.html name="More Information" %}
For each project, we get some interesting details - how many backers it has, how much it's raised, and some information about it's creator and location. But what more can we get?

In the details for each project is a URL to a profile page for it's creator. Trying our previous trick on this URL doesn't work though - trying to get JSON data just results in a 404 error page being returned. Viewing the network traffic for the page doesn't reveal anything interesting either. There is still the option of scraping the profile page, but at the moment, we'll have to make do with the information contained in the project details.

There are also two URLs associated with the project's location. This time, our trick works on these URLs, with one giving us information about other projects that have the same location, and the other giving details of locations that are nearby.

So what about the project itself? Well, there is another URL associated with it. Again, our trick does work. However, the JSON data contains chunks of HTML. There is useful information to be gained from these chunks, but that will be investigated in future posts.

{% include section_header.html name="Summary" %}
Now we have a means of getting information about projects, both by searching and by using various filters. We can also get more information related to specific projects. In the next post, we can start looking at how to use it.